(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global.Cel = factory());
}(this, (function () { 'use strict';

// src/core/initMixin.js


function initMixin(Cel) {
	// Finds elements via its selector and caches them under the 'elem' property of that element.
	Cel.prototype._getElementsOnMount = function () {
		var vm = this;
		if (vm.elems.length > 0) {
			for (var i = 0, numElem = vm.elems.length; i < numElem; i++) {

				// If jQuery is available and using the '$elemName' convention,
				// Return a jQuery object.
				if ((jQuery != null || $ != null) && vm.elems[i].name.slice(0, 1) === '$') {
					vm.elems[i].elem = $(vm.elems[i].selector);
					vm.elems[i].type = 'jquery';
				}

				// Else, just use vanilla javascript DOM node.
				else {
						vm.elems[i].elem = document.querySelector(vm.elems[i].selector);
						vm.elems[i].type = 'element';
					}
			} // for
		} // if
	};

	// Binds the component's "this" to the methods.
	// This is done to be able to call 'this.methods.functionName()' from other methods and handlers.
	Cel.prototype._bindThisToMethods = function () {
		var vm = this;
		var methods = Object.keys(vm.methods);
		if (methods.length > 0) {
			for (var i = 0, numMethods = methods.length; i < numMethods; i = i + 1) {
				vm.methods[methods[i]] = vm.methods[methods[i]].bind(vm);
			} // for
		} // if
	};

	// Adds event-listeners to target elements when component initializes.
	Cel.prototype._bindEventsOnMount = function () {
		var vm = this;
		var numEvents = vm.events.length;
		if (vm.elems.length > 0 && numEvents > 0) {

			// Filters out an element that matches the event's target.
			var findEventTargetInElements = function findEventTargetInElements(elIndex, item, index) {
				return item.name === vm.events[elIndex].target;
			};

			// Binds each event to its designated target
			for (var i = 0; i < numEvents; i++) {
				var target = vm.elems.filter(findEventTargetInElements.bind(vm, i))[0];
				var bindType = target.type === 'jquery' ? 'on' : 'addEventListener';
				var func = vm.handlers[vm.events[i].handler].bind(vm);

				// Prevent using Debounce and Throttle for same event.
				if (vm.events[i].debounce != null && typeof vm.events[i].debounce === 'number' && vm.events[i].throttle != null && typeof vm.events[i].throttle === 'number') {
					console.warn('[' + vm.name + ']: Cannot set both \'debounce\' and \'throttle\' configurations on the same event. Please use only one.');
				} // if

				// Add debouncing to function if setting is correct.
				else if (vm.events[i].debounce != null) {
						if (typeof vm.events[i].debounce === 'number' && vm.events[i].debounce > 0) {
							// Setting is correct, adding debouncing.
							func = vm._debounce(func, vm.events[i].debounce);
						} else {
							console.warn('[' + vm.name + ']: Ensure your \'debounce\' setting is a number greater than 0.');
						}
					} // else if

					// Add throttling to function if setting is correct.
					else if (vm.events[i].throttle != null) {
							if (typeof vm.events[i].throttle === 'number' && vm.events[i].throttle > 0) {
								// Setting is correct, adding throttling.
								func = vm._throttle(func, vm.events[i].throttle);
							} else {
								console.warn('[' + vm.name + ']: Ensure your \'throttle\' setting is a number greater than 0.');
							}
						} // else if

				// Binding callback event to target.
				target.elem[bindType](vm.events[i].type, func);
			} // for numEvents
		} // if elems.length
	};

	// Ensuring the settings are correct.
	Cel.prototype._checkComponentSettings = function () {
		var vm = this;
		if (vm.name === null || vm.name === '' || vm.name === 'NamelessComponent') {
			console.warn('Please ensure that you named all your components with a \'name\' property. At least one is missing right now.');
		}
	};

	// Publically accessible initialize function to bootstrap the component.
	Cel.prototype.init = function () {
		var vm = this;
		vm._checkComponentSettings();
		vm._getElementsOnMount();
		vm._bindThisToMethods();
		vm._bindEventsOnMount();
	};
}

// src/core/scriptMixin.js


function scriptMixin(Cel) {
	// From Underscore library
	Cel.prototype._debounce = function (func, wait, immediate) {
		var timeout = void 0;
		return function () {
			var context = this;
			var args = arguments;
			var later = function later() {
				timeout = null;
				if (!immediate) {
					func.apply(context, args);
				}
			};
			var callNow = immediate && !timeout;
			clearTimeout(timeout);
			timeout = setTimeout(later, wait);
			if (callNow) {
				func.apply(context, args);
			}
		};
	};

	// From Underscore library
	Cel.prototype._throttle = function (func, wait, options) {
		var context = void 0,
		    args = void 0,
		    result = void 0;
		var timeout = null;
		var previous = 0;
		if (!options) {
			options = {};
		}
		var later = function later() {
			previous = options.leading === false ? 0 : Date.now();
			timeout = null;
			result = func.apply(context, args);
			if (!timeout) {
				context = args = null;
			}
		};
		return function () {
			var now = Date.now();
			if (!previous && options.leading === false) {
				previous = now;
			}
			var remaining = wait - (now - previous);
			context = this;
			args = arguments;
			if (remaining <= 0 || remaining > wait) {
				if (timeout) {
					clearTimeout(timeout);
					timeout = null;
				}
				previous = now;
				result = func.apply(context, args);
				if (!timeout) {
					context = args = null;
				}
			} else if (!timeout && options.trailing !== false) {
				timeout = setTimeout(later, remaining);
			}
			return result;
		};
	};

	Cel.prototype.setState = function (prop, value) {
		var vm = this;
		try {
			vm.state[prop] = value;
		} catch (e) {
			console.warn('[' + vm.name + ']: Could not set value of "' + prop + '", make sure it exists in your component config.');
		}
	};
}

// src/core/component.js
function Cel$3(options) {
	this.name = options.name || 'NamelessComponent';
	this._ = options._;
	this.state = options.state;
	this.elems = options.elems;
	this.methods = options.methods;
	this.handlers = options.handlers;
	this.events = options.events;
}

initMixin(Cel$3);
scriptMixin(Cel$3);

// src/core/cel.js
var Cel$1 = function Cel(options) {

	var cel = new Cel$3(options);

	return {
		init: cel.init.bind(cel)
	};
};

// src/index.js

return Cel$1;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy9jb3JlL2luaXRNaXhpbi5qcyIsIi4uL3NyYy9jb3JlL3NjcmlwdE1peGluLmpzIiwiLi4vc3JjL2NvcmUvY29tcG9uZW50LmpzIiwiLi4vc3JjL2NvcmUvY2VsLmpzIiwiLi4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb3JlL2luaXRNaXhpbi5qc1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0TWl4aW4oQ2VsKSB7XHJcblx0Ly8gRmluZHMgZWxlbWVudHMgdmlhIGl0cyBzZWxlY3RvciBhbmQgY2FjaGVzIHRoZW0gdW5kZXIgdGhlICdlbGVtJyBwcm9wZXJ0eSBvZiB0aGF0IGVsZW1lbnQuXHJcblx0Q2VsLnByb3RvdHlwZS5fZ2V0RWxlbWVudHNPbk1vdW50ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRjb25zdCB2bSA9IHRoaXM7XHJcblx0XHRpZiAoIHZtLmVsZW1zLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdGZvciAoIHZhciBpID0gMCwgbnVtRWxlbSA9IHZtLmVsZW1zLmxlbmd0aDsgaSA8IG51bUVsZW07IGkrKyApIHtcclxuXHJcblx0XHRcdFx0Ly8gSWYgalF1ZXJ5IGlzIGF2YWlsYWJsZSBhbmQgdXNpbmcgdGhlICckZWxlbU5hbWUnIGNvbnZlbnRpb24sXHJcblx0XHRcdFx0Ly8gUmV0dXJuIGEgalF1ZXJ5IG9iamVjdC5cclxuXHRcdFx0XHRpZiAoIChqUXVlcnkgIT0gbnVsbCB8fCAkICE9IG51bGwpICYmXHJcblx0XHRcdFx0XHR2bS5lbGVtc1tpXS5uYW1lLnNsaWNlKDAsIDEpID09PSAnJCdcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdHZtLmVsZW1zW2ldLmVsZW0gPSAkKCB2bS5lbGVtc1tpXS5zZWxlY3RvciApO1xyXG5cdFx0XHRcdFx0dm0uZWxlbXNbaV0udHlwZSA9ICdqcXVlcnknO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gRWxzZSwganVzdCB1c2UgdmFuaWxsYSBqYXZhc2NyaXB0IERPTSBub2RlLlxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0dm0uZWxlbXNbaV0uZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHZtLmVsZW1zW2ldLnNlbGVjdG9yICk7XHJcblx0XHRcdFx0XHR2bS5lbGVtc1tpXS50eXBlID0gJ2VsZW1lbnQnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSAvLyBmb3JcclxuXHRcdH0gLy8gaWZcclxuXHR9O1xyXG5cclxuXHQvLyBCaW5kcyB0aGUgY29tcG9uZW50J3MgXCJ0aGlzXCIgdG8gdGhlIG1ldGhvZHMuXHJcblx0Ly8gVGhpcyBpcyBkb25lIHRvIGJlIGFibGUgdG8gY2FsbCAndGhpcy5tZXRob2RzLmZ1bmN0aW9uTmFtZSgpJyBmcm9tIG90aGVyIG1ldGhvZHMgYW5kIGhhbmRsZXJzLlxyXG5cdENlbC5wcm90b3R5cGUuX2JpbmRUaGlzVG9NZXRob2RzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRjb25zdCB2bSA9IHRoaXM7XHJcblx0XHR2YXIgbWV0aG9kcyA9IE9iamVjdC5rZXlzKHZtLm1ldGhvZHMpO1xyXG5cdFx0aWYgKCBtZXRob2RzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdGZvciAoXHJcblx0XHRcdFx0dmFyIGkgPSAwLFxyXG5cdFx0XHRcdG51bU1ldGhvZHMgPSBtZXRob2RzLmxlbmd0aDtcclxuXHRcdFx0XHRpIDwgbnVtTWV0aG9kcztcclxuXHRcdFx0XHRpID0gaSsxXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHZtLm1ldGhvZHNbIG1ldGhvZHNbaV0gXSA9IHZtLm1ldGhvZHNbIG1ldGhvZHNbaV0gXS5iaW5kKHZtKTtcclxuXHRcdFx0fSAvLyBmb3JcclxuXHRcdH0gLy8gaWZcclxuXHR9O1xyXG5cclxuXHQvLyBBZGRzIGV2ZW50LWxpc3RlbmVycyB0byB0YXJnZXQgZWxlbWVudHMgd2hlbiBjb21wb25lbnQgaW5pdGlhbGl6ZXMuXHJcblx0Q2VsLnByb3RvdHlwZS5fYmluZEV2ZW50c09uTW91bnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdGNvbnN0IHZtID0gdGhpcztcclxuXHRcdHZhciBudW1FdmVudHMgPSB2bS5ldmVudHMubGVuZ3RoO1xyXG5cdFx0aWYgKCB2bS5lbGVtcy5sZW5ndGggPiAwICYmIG51bUV2ZW50cyA+IDApIHtcclxuXHJcblx0XHRcdC8vIEZpbHRlcnMgb3V0IGFuIGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBldmVudCdzIHRhcmdldC5cclxuXHRcdFx0dmFyIGZpbmRFdmVudFRhcmdldEluRWxlbWVudHMgPSBmdW5jdGlvbiggZWxJbmRleCwgaXRlbSwgaW5kZXggKSB7XHJcblx0XHRcdFx0cmV0dXJuIGl0ZW0ubmFtZSA9PT0gdm0uZXZlbnRzWyBlbEluZGV4IF0udGFyZ2V0O1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gQmluZHMgZWFjaCBldmVudCB0byBpdHMgZGVzaWduYXRlZCB0YXJnZXRcclxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgbnVtRXZlbnRzOyBpKysgKSB7XHJcblx0XHRcdFx0dmFyIHRhcmdldCA9IHZtLmVsZW1zLmZpbHRlciggZmluZEV2ZW50VGFyZ2V0SW5FbGVtZW50cy5iaW5kKHZtLCBpKSApWzBdO1xyXG5cdFx0XHRcdHZhciBiaW5kVHlwZSA9ICggdGFyZ2V0LnR5cGUgPT09ICdqcXVlcnknICkgPyAnb24nIDogJ2FkZEV2ZW50TGlzdGVuZXInO1xyXG5cdFx0XHRcdHZhciBmdW5jID0gdm0uaGFuZGxlcnNbIHZtLmV2ZW50c1tpXS5oYW5kbGVyIF0uYmluZCh2bSlcclxuXHJcblx0XHRcdFx0Ly8gUHJldmVudCB1c2luZyBEZWJvdW5jZSBhbmQgVGhyb3R0bGUgZm9yIHNhbWUgZXZlbnQuXHJcblx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0dm0uZXZlbnRzW2ldLmRlYm91bmNlICE9IG51bGwgJiZcclxuXHRcdFx0XHRcdHR5cGVvZiB2bS5ldmVudHNbaV0uZGVib3VuY2UgPT09ICdudW1iZXInICYmXHJcblx0XHRcdFx0XHR2bS5ldmVudHNbaV0udGhyb3R0bGUgIT0gbnVsbCAmJlxyXG5cdFx0XHRcdFx0dHlwZW9mIHZtLmV2ZW50c1tpXS50aHJvdHRsZSA9PT0gJ251bWJlcidcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUud2FybignWycrdm0ubmFtZSsnXTogQ2Fubm90IHNldCBib3RoIFxcJ2RlYm91bmNlXFwnIGFuZCBcXCd0aHJvdHRsZVxcJyBjb25maWd1cmF0aW9ucyBvbiB0aGUgc2FtZSBldmVudC4gUGxlYXNlIHVzZSBvbmx5IG9uZS4nKTtcclxuXHRcdFx0XHR9IC8vIGlmXHJcblxyXG5cdFx0XHRcdC8vIEFkZCBkZWJvdW5jaW5nIHRvIGZ1bmN0aW9uIGlmIHNldHRpbmcgaXMgY29ycmVjdC5cclxuXHRcdFx0XHRlbHNlIGlmIChcclxuXHRcdFx0XHRcdHZtLmV2ZW50c1tpXS5kZWJvdW5jZSAhPSBudWxsXHJcblx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRpZiAoXHJcblx0XHRcdFx0XHRcdHR5cGVvZiB2bS5ldmVudHNbaV0uZGVib3VuY2UgPT09ICdudW1iZXInICYmXHJcblx0XHRcdFx0XHRcdHZtLmV2ZW50c1tpXS5kZWJvdW5jZSA+IDBcclxuXHRcdFx0XHRcdCkgeyAvLyBTZXR0aW5nIGlzIGNvcnJlY3QsIGFkZGluZyBkZWJvdW5jaW5nLlxyXG5cdFx0XHRcdFx0XHRmdW5jID0gdm0uX2RlYm91bmNlKCBmdW5jLCB2bS5ldmVudHNbaV0uZGVib3VuY2UgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybignWycrdm0ubmFtZSsnXTogRW5zdXJlIHlvdXIgXFwnZGVib3VuY2VcXCcgc2V0dGluZyBpcyBhIG51bWJlciBncmVhdGVyIHRoYW4gMC4nKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IC8vIGVsc2UgaWZcclxuXHJcblx0XHRcdFx0Ly8gQWRkIHRocm90dGxpbmcgdG8gZnVuY3Rpb24gaWYgc2V0dGluZyBpcyBjb3JyZWN0LlxyXG5cdFx0XHRcdGVsc2UgaWYgKFxyXG5cdFx0XHRcdFx0dm0uZXZlbnRzW2ldLnRocm90dGxlICE9IG51bGxcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdFx0dHlwZW9mIHZtLmV2ZW50c1tpXS50aHJvdHRsZSA9PT0gJ251bWJlcicgJiZcclxuXHRcdFx0XHRcdFx0dm0uZXZlbnRzW2ldLnRocm90dGxlID4gMFxyXG5cdFx0XHRcdFx0KSB7IC8vIFNldHRpbmcgaXMgY29ycmVjdCwgYWRkaW5nIHRocm90dGxpbmcuXHJcblx0XHRcdFx0XHRcdGZ1bmMgPSB2bS5fdGhyb3R0bGUoIGZ1bmMsIHZtLmV2ZW50c1tpXS50aHJvdHRsZSApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCdbJyt2bS5uYW1lKyddOiBFbnN1cmUgeW91ciBcXCd0aHJvdHRsZVxcJyBzZXR0aW5nIGlzIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAwLicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gLy8gZWxzZSBpZlxyXG5cclxuXHRcdFx0XHQvLyBCaW5kaW5nIGNhbGxiYWNrIGV2ZW50IHRvIHRhcmdldC5cclxuXHRcdFx0XHR0YXJnZXQuZWxlbVsgYmluZFR5cGUgXShcclxuXHRcdFx0XHRcdHZtLmV2ZW50c1sgaSBdLnR5cGUsXHJcblx0XHRcdFx0XHRmdW5jXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fSAvLyBmb3IgbnVtRXZlbnRzXHJcblx0XHR9IC8vIGlmIGVsZW1zLmxlbmd0aFxyXG5cdH07XHJcblxyXG5cdC8vIEVuc3VyaW5nIHRoZSBzZXR0aW5ncyBhcmUgY29ycmVjdC5cclxuXHRDZWwucHJvdG90eXBlLl9jaGVja0NvbXBvbmVudFNldHRpbmdzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRjb25zdCB2bSA9IHRoaXM7XHJcblx0XHRpZiAoXHJcblx0XHRcdHZtLm5hbWUgPT09IG51bGwgfHxcclxuXHRcdFx0dm0ubmFtZSA9PT0gJycgfHxcclxuXHRcdFx0dm0ubmFtZSA9PT0gJ05hbWVsZXNzQ29tcG9uZW50J1xyXG5cdFx0KSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignUGxlYXNlIGVuc3VyZSB0aGF0IHlvdSBuYW1lZCBhbGwgeW91ciBjb21wb25lbnRzIHdpdGggYSBcXCduYW1lXFwnIHByb3BlcnR5LiBBdCBsZWFzdCBvbmUgaXMgbWlzc2luZyByaWdodCBub3cuJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBQdWJsaWNhbGx5IGFjY2Vzc2libGUgaW5pdGlhbGl6ZSBmdW5jdGlvbiB0byBib290c3RyYXAgdGhlIGNvbXBvbmVudC5cclxuXHRDZWwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdGNvbnN0IHZtID0gdGhpcztcclxuXHRcdHZtLl9jaGVja0NvbXBvbmVudFNldHRpbmdzKCk7XHJcblx0XHR2bS5fZ2V0RWxlbWVudHNPbk1vdW50KCk7XHJcblx0XHR2bS5fYmluZFRoaXNUb01ldGhvZHMoKTtcclxuXHRcdHZtLl9iaW5kRXZlbnRzT25Nb3VudCgpO1xyXG5cdH07XHJcblxyXG59O1xyXG4iLCIvLyBzcmMvY29yZS9zY3JpcHRNaXhpbi5qc1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzY3JpcHRNaXhpbihDZWwpIHtcclxuXHQvLyBGcm9tIFVuZGVyc2NvcmUgbGlicmFyeVxyXG5cdENlbC5wcm90b3R5cGUuX2RlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XHJcblx0XHRsZXQgdGltZW91dDtcclxuXHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0bGV0IGNvbnRleHQgPSB0aGlzO1xyXG5cdFx0XHRsZXQgYXJncyA9IGFyZ3VtZW50cztcclxuXHRcdFx0bGV0IGxhdGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGltZW91dCA9IG51bGw7XHJcblx0XHRcdFx0aWYgKCFpbW1lZGlhdGUpIHtcclxuXHRcdFx0XHRcdGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRsZXQgY2FsbE5vdyA9IChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpO1xyXG5cdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVvdXQgKTtcclxuXHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xyXG5cdFx0XHRpZiAoY2FsbE5vdykge1xyXG5cdFx0XHRcdGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0Ly8gRnJvbSBVbmRlcnNjb3JlIGxpYnJhcnlcclxuXHRDZWwucHJvdG90eXBlLl90aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcclxuXHRcdGxldCBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XHJcblx0XHRsZXQgdGltZW91dCA9IG51bGw7XHJcblx0XHRsZXQgcHJldmlvdXMgPSAwO1xyXG5cdFx0aWYgKCAhb3B0aW9ucyApIHtcclxuXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG5cdFx0fVxyXG5cdFx0bGV0IGxhdGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBEYXRlLm5vdygpO1xyXG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0cmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuXHRcdFx0aWYgKCAhdGltZW91dCApIHtcclxuXHRcdFx0XHRjb250ZXh0ID0gYXJncyA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGxldCBub3cgPSBEYXRlLm5vdygpO1xyXG5cdFx0XHRpZiAoICFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdHByZXZpb3VzID0gbm93O1xyXG5cdFx0XHR9XHJcblx0XHRcdGxldCByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcclxuXHRcdFx0Y29udGV4dCA9IHRoaXM7XHJcblx0XHRcdGFyZ3MgPSBhcmd1bWVudHM7XHJcblx0XHRcdGlmICggcmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCApIHtcclxuXHRcdFx0XHRpZiAodGltZW91dCkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHRcdFx0dGltZW91dCA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHByZXZpb3VzID0gbm93O1xyXG5cdFx0XHRcdHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0XHRcdFx0aWYgKCAhdGltZW91dCApIHtcclxuXHRcdFx0XHRcdGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoICF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlICkge1xyXG5cdFx0XHRcdHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXN1bHQ7XHJcblx0XHR9O1xyXG5cdH07XHJcblxyXG5cclxuXHRDZWwucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xyXG5cdFx0Y29uc3Qgdm0gPSB0aGlzO1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0dm0uc3RhdGVbIHByb3AgXSA9IHZhbHVlO1xyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1snK3ZtLm5hbWUrJ106IENvdWxkIG5vdCBzZXQgdmFsdWUgb2YgXCInK3Byb3ArJ1wiLCBtYWtlIHN1cmUgaXQgZXhpc3RzIGluIHlvdXIgY29tcG9uZW50IGNvbmZpZy4nKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxufTtcclxuIiwiLy8gc3JjL2NvcmUvY29tcG9uZW50LmpzXHJcbmltcG9ydCB7IGluaXRNaXhpbiB9IGZyb20gJy4vaW5pdE1peGluJztcclxuaW1wb3J0IHsgc2NyaXB0TWl4aW4gfSBmcm9tICcuL3NjcmlwdE1peGluJztcclxuXHJcblxyXG5mdW5jdGlvbiBDZWwoIG9wdGlvbnMgKSB7XHJcblx0dGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lIHx8ICdOYW1lbGVzc0NvbXBvbmVudCc7XHJcblx0dGhpcy5fID0gb3B0aW9ucy5fO1xyXG5cdHRoaXMuc3RhdGUgPSBvcHRpb25zLnN0YXRlO1xyXG5cdHRoaXMuZWxlbXMgPSBvcHRpb25zLmVsZW1zO1xyXG5cdHRoaXMubWV0aG9kcyA9IG9wdGlvbnMubWV0aG9kcztcclxuXHR0aGlzLmhhbmRsZXJzID0gb3B0aW9ucy5oYW5kbGVycztcclxuXHR0aGlzLmV2ZW50cyA9IG9wdGlvbnMuZXZlbnRzO1xyXG59XHJcblxyXG5pbml0TWl4aW4oIENlbCApO1xyXG5zY3JpcHRNaXhpbiggQ2VsICk7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2VsOyIsIi8vIHNyYy9jb3JlL2NlbC5qc1xyXG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcclxuXHJcblxyXG5jb25zdCBDZWwgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHJcblx0dmFyIGNlbCA9IG5ldyBDb21wb25lbnQoIG9wdGlvbnMgKTtcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdGluaXQ6IGNlbC5pbml0LmJpbmQoY2VsKVxyXG5cdH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDZWw7IiwiLy8gc3JjL2luZGV4LmpzXHJcbmltcG9ydCBDZWwgZnJvbSAnLi9jb3JlL2NlbC5qcyc7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2VsOyJdLCJuYW1lcyI6WyJpbml0TWl4aW4iLCJDZWwiLCJwcm90b3R5cGUiLCJfZ2V0RWxlbWVudHNPbk1vdW50Iiwidm0iLCJlbGVtcyIsImxlbmd0aCIsImkiLCJudW1FbGVtIiwialF1ZXJ5IiwiJCIsIm5hbWUiLCJzbGljZSIsImVsZW0iLCJzZWxlY3RvciIsInR5cGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfYmluZFRoaXNUb01ldGhvZHMiLCJtZXRob2RzIiwiT2JqZWN0Iiwia2V5cyIsIm51bU1ldGhvZHMiLCJiaW5kIiwiX2JpbmRFdmVudHNPbk1vdW50IiwibnVtRXZlbnRzIiwiZXZlbnRzIiwiZmluZEV2ZW50VGFyZ2V0SW5FbGVtZW50cyIsImVsSW5kZXgiLCJpdGVtIiwiaW5kZXgiLCJ0YXJnZXQiLCJmaWx0ZXIiLCJiaW5kVHlwZSIsImZ1bmMiLCJoYW5kbGVycyIsImhhbmRsZXIiLCJkZWJvdW5jZSIsInRocm90dGxlIiwid2FybiIsIl9kZWJvdW5jZSIsIl90aHJvdHRsZSIsIl9jaGVja0NvbXBvbmVudFNldHRpbmdzIiwiaW5pdCIsInNjcmlwdE1peGluIiwid2FpdCIsImltbWVkaWF0ZSIsInRpbWVvdXQiLCJjb250ZXh0IiwiYXJncyIsImFyZ3VtZW50cyIsImxhdGVyIiwiYXBwbHkiLCJjYWxsTm93Iiwic2V0VGltZW91dCIsIm9wdGlvbnMiLCJyZXN1bHQiLCJwcmV2aW91cyIsImxlYWRpbmciLCJEYXRlIiwibm93IiwicmVtYWluaW5nIiwidHJhaWxpbmciLCJzZXRTdGF0ZSIsInByb3AiLCJ2YWx1ZSIsInN0YXRlIiwiZSIsIl8iLCJjZWwiLCJDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7QUFHQSxBQUFPLFNBQVNBLFNBQVQsQ0FBbUJDLEdBQW5CLEVBQXdCOztLQUUxQkMsU0FBSixDQUFjQyxtQkFBZCxHQUFvQyxZQUFXO01BQ3hDQyxLQUFLLElBQVg7TUFDS0EsR0FBR0MsS0FBSCxDQUFTQyxNQUFULEdBQWtCLENBQXZCLEVBQTJCO1FBQ3BCLElBQUlDLElBQUksQ0FBUixFQUFXQyxVQUFVSixHQUFHQyxLQUFILENBQVNDLE1B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
