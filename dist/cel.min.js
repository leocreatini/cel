!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Cel=t()}(this,function(){"use strict";function e(e){e.prototype._getElementsOnMount=function(){var e=this;if(null!=e.elems)for(var t=0,n=e.elems.length;t<n;t++)null==jQuery&&null==$||"$"!==e.elems[t].name.slice(0,1)?(e.elems[t].elem=document.querySelector(e.elems[t].selector),e.elems[t].type="element"):(e.elems[t].elem=$(e.elems[t].selector),e.elems[t].type="jquery")},e.prototype._bindThisToMethods=function(){var e=this,t=Object.keys(e.methods),n=t.length;if(n>0)for(var o=0;o<n;o+=1)e.methods[t[o]]=e.methods[t[o]].bind(e)},e.prototype._bindEventsOnMount=function(){var e=this;if(null!=e.events){var t=e.events.length;if(null!=e.elems&&t>0)for(var n=function(t,n,o){return n.name===e.events[t].target},o=0;o<t;o++){var s=e.elems.filter(n.bind(e,o))[0],r="jquery"===s.type?"on":"addEventListener",i=e.handlers[e.events[o].handler].bind(e);null!=e.events[o].debounce&&"number"==typeof e.events[o].debounce&&null!=e.events[o].throttle&&"number"==typeof e.events[o].throttle?console.warn("["+e.name+"]: Cannot set both 'debounce' and 'throttle' configurations on the same event. Please use only one."):null!=e.events[o].debounce?"number"==typeof e.events[o].debounce&&e.events[o].debounce>0?i=e._debounce(i,e.events[o].debounce):console.warn("["+e.name+"]: Ensure your 'debounce' setting is a number greater than 0."):null!=e.events[o].throttle&&("number"==typeof e.events[o].throttle&&e.events[o].throttle>0?i=e._throttle(i,e.events[o].throttle):console.warn("["+e.name+"]: Ensure your 'throttle' setting is a number greater than 0.")),s.elem[r](e.events[o].type,i)}}},e.prototype._checkComponentSettings=function(){var e=this;null!==e.name&&""!==e.name&&"NamelessComponent"!==e.name||console.warn("Please ensure that you named all your components with a 'name' property. At least one is missing right now.")},e.prototype.init=function(){var e=this;e._checkComponentSettings(),e._getElementsOnMount(),e._bindThisToMethods(),e._bindEventsOnMount()}}function t(e){e.prototype._debounce=function(e,t,n){var o=void 0;return function(){var s=this,r=arguments,i=function(){o=null,n||e.apply(s,r)},l=n&&!o;clearTimeout(o),o=setTimeout(i,t),l&&e.apply(s,r)}},e.prototype._throttle=function(e,t,n){var o=void 0,s=void 0,r=void 0,i=null,l=0;n||(n={});var u=function(){l=n.leading===!1?0:Date.now(),i=null,r=e.apply(o,s),i||(o=s=null)};return function(){var a=Date.now();l||n.leading!==!1||(l=a);var c=t-(a-l);return o=this,s=arguments,c<=0||c>t?(i&&(clearTimeout(i),i=null),l=a,r=e.apply(o,s),i||(o=s=null)):i||n.trailing===!1||(i=setTimeout(u,c)),r}},e.prototype.fetch=function(e,t,n){var o;o=new XMLHttpRequest,o.onload=function(){200===o.status?t(o.responseText):n(o.statusText)},o.open("GET",e,!0),o.send()},e.prototype.setState=function(e,t){var n=this;try{n.state[e]=t}catch(t){console.warn("["+n.name+']: Could not set value of "'+e+'", make sure it exists in your component config.',t)}},e.prototype.setStateAsync=function(e,t,n){var o=this,s=new Promise(function(e,n){t(function(t){e(t)},function(e){n(e)})});s.then(function(t){o.state[e]=t,null!=n&&"function"==typeof n&&n(t)}),s.catch(function(t){console.log("["+o.name+"]: Error setting state of "+e+" asynchronously",t)})},e.prototype.setHtml=function(e,t){var n=this,o=function(t,n){return t.name===e},s=n.elems.filter(o.bind(n))[0];"jquery"===s.type?s.elem.html(t):"element"===s.type&&(s.elem.innerHTML=t)}}function n(e){this.name=e.name||"NamelessComponent",this._=e._,this.state=e.state,this.elems=e.elems,this.methods=e.methods,this.handlers=e.handlers,this.events=e.events,this.exposed=e.exposed}function o(e){var t={init:e.init.bind(e)};if(null!=e.exposed)if(Array.isArray(e.exposed)&&e.exposed.length>0)if(e.exposed.indexOf("init")>0)console.warn("["+e.name+"]: The 'init' property is already taken by Cel, please use a different name for your function.");else for(var n=0,o=e.exposed.length;n<o;n+=1)e.methods.hasOwnProperty(e.exposed[n])&&(t[e.exposed[n]]=e.methods[e.exposed[n]].bind(e));else console.warn("["+e.name+"]: Please ensure the 'exposed' property is an array of strings.");return t}e(n),t(n);var s=function(e){var t=new n(e);return o(t)};return s});
