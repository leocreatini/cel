!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.Cel=n()}(this,function(){"use strict";function e(e){e.prototype._getElementsOnMount=function(){var e=this;if(null!=e.elems)for(var n=0,t=e.elems.length;n<t;n++)null==window.jQuery&&null==window.$||"$"!==e.elems[n].name.slice(0,1)?(e.elems[n].elem=document.querySelector(e.elems[n].selector),e.elems[n].type="element"):(e.elems[n].elem=$(e.elems[n].selector),e.elems[n].type="jquery")},e.prototype._bindThisToMethods=function(){var e=this,n=Object.keys(e.methods),t=n.length;if(t>0)for(var o=0;o<t;o+=1)e.methods[n[o]]=e.methods[n[o]].bind(e)},e.prototype._bindEventsOnMount=function(){var e=this;if(null!=e.events){var n=e.events.length;if(null!=e.elems&&n>0)for(var t=function(n,t,o){return t.name===e.events[n].target},o=0;o<n;o++){var s=e.elems.filter(t.bind(e,o))[0],i="jquery"===s.type?"on":"addEventListener",r=e.handlers[e.events[o].handler].bind(e);null!=e.events[o].debounce&&"number"==typeof e.events[o].debounce&&null!=e.events[o].throttle&&"number"==typeof e.events[o].throttle?console.warn("["+e.name+"]: Cannot set both 'debounce' and 'throttle' configurations on the same event. Please use only one."):null!=e.events[o].debounce?"number"==typeof e.events[o].debounce&&e.events[o].debounce>0?r=e._debounce(r,e.events[o].debounce):console.warn("["+e.name+"]: Ensure your 'debounce' setting is a number greater than 0."):null!=e.events[o].throttle&&("number"==typeof e.events[o].throttle&&e.events[o].throttle>0?r=e._throttle(r,e.events[o].throttle):console.warn("["+e.name+"]: Ensure your 'throttle' setting is a number greater than 0.")),s.elem[i](e.events[o].type,r)}}},e.prototype._checkComponentSettings=function(){var e=this;null!==e.name&&""!==e.name&&"NamelessComponent"!==e.name||console.warn("Please ensure that you named all your components with a 'name' property. At least one is missing right now.")},e.prototype.getName=function(){return this.name},e.prototype.__ctx__=function(){return this},e.prototype.init=function(){var e=this;e._checkComponentSettings(),e._getElementsOnMount(),e._bindThisToMethods(),e._bindEventsOnMount()}}function n(e){e.prototype._debounce=function(e,n,t){var o=void 0;return function(){var s=this,i=arguments,r=function(){o=null,t||e.apply(s,i)},l=t&&!o;clearTimeout(o),o=setTimeout(r,n),l&&e.apply(s,i)}},e.prototype._throttle=function(e,n,t){var o=void 0,s=void 0,i=void 0,r=null,l=0;t||(t={});var a=function(){l=t.leading===!1?0:Date.now(),r=null,i=e.apply(o,s),r||(o=s=null)};return function(){var u=Date.now();l||t.leading!==!1||(l=u);var c=n-(u-l);return o=this,s=arguments,c<=0||c>n?(r&&(clearTimeout(r),r=null),l=u,i=e.apply(o,s),r||(o=s=null)):r||t.trailing===!1||(r=setTimeout(a,c)),i}},e.prototype.fetch=function(e,n,t){var o;o=new XMLHttpRequest,o.onload=function(){200===o.status?n(o.responseText):t(o.statusText)},o.open("GET",e,!0),o.send()},e.prototype.setState=function(e,n){var t=this;try{t.state[e]=n}catch(n){console.warn("["+t.name+']: Could not set value of "'+e+'", make sure it exists in your component config.',n)}},e.prototype.setStateAsync=function(e,n,t){var o=this,s=new Promise(function(e,t){n(function(n){e(n)},function(e){t(e)})});s.then(function(n){o.setState(e,n),null!=t&&"function"==typeof t&&t(n)}),s.catch(function(n){console.log("["+o.name+"]: Error setting state of "+e+" asynchronously",n)})},e.prototype.setHtml=function(e,n){var t=this,o=function(n,t){return n.name===e},s=t.elems.filter(o.bind(t))[0];"jquery"===s.type?s.elem.html(n):"element"===s.type&&(s.elem.innerHTML=n)}}function t(e){this.name=e.name||"NamelessComponent",this.dependencies=e.dependencies,this._=e._,this.state=e.state,this.elems=e.elems,this.methods=e.methods,this.handlers=e.handlers,this.events=e.events,this.exposed=e.exposed}function o(e){var n={__ctx__:e.__ctx__.bind(e),init:e.init.bind(e),getName:e.getName.bind(e)};if(null!=e.exposed)if(Array.isArray(e.exposed)&&e.exposed.length>0)if(e.exposed.indexOf("init")>0)console.warn("["+e.name+"]: The 'init' property is already taken by Cel, please use a different name for your function.");else for(var t=0,o=e.exposed.length;t<o;t++)e.methods.hasOwnProperty(e.exposed[t])&&(n[e.exposed[t]]=e.methods[e.exposed[t]].bind(e));else console.warn("["+e.name+"]: Please ensure the 'exposed' property is an array of strings.");return n}function s(e){window.Cel.settings=window.Cel.settings||{},window.Cel.settings.namespace=e;var n="",t="init",o="data-action",s=/\./,i=function(e){n=e},r=function(){return n},l=function(e){for(var n=[],t=document.getElementsByTagName("*"),o=0,s=t.length;o<s;o+=1)null!==t[o].getAttribute(e)&&n.push(t[o]);return n},a=function(n){var t=e;return n.split(".").map(function(e,n){t=t[e]}),t},u=function(n){var o=r();if(""!==o)if(s.test(o)){var i=a(o);i[t](n)}else e[o]&&"function"==typeof e[o][t]&&e[o][t](n)},c=function(){window.Cel.instances.map(function(e,n){var t=e.__ctx__();null!=t.dependencies&&t.dependencies.length>0&&t.dependencies.map(function(e,n){var o=window.Cel.instances.filter(function(n,t){return n.getName()===e})[0];"function"==typeof o.init&&(o.init(),o.init=null),t.$=t.$||{},t.$[e]=o})})},p=function(){for(var e=l(o),n=0,t=e.length;n<t;n++){var s=e[n];i(s.getAttribute(o)),u(s)}c()};p()}e(t),n(t);var i=function(e){if(window.Cel.instances=window.Cel.instances||[],null!=e){var n=new t(e);return n=o(n),window.Cel.instances.push(n),n}return null==e?{init:s}:void console.warn('There was bad configurations with a Cel component. You must pass options for a cel component, or "null" and a namespace object for parameters to initialize components.')};return i});
